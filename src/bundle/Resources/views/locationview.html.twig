{% trans_default_domain 'locationview' %}

<ez-server-side-content class="ez-content-view">
    <section class="ez-content-view-column ez-tabs">
    {% block contentview %}
        {% block contentview_details %}
        <header class="ez-page-header">
            <h1>{{ ez_content_name(content) }}</h1>
        </header>

        <ul class="ez-tabs-list">
            <li class="ez-tabs-label is-tab-selected"><a href="#ez-tab-view">{{ 'tab.view'|trans|desc('View') }}</a></li>
            <li class="ez-tabs-label"><a href="#ez-tab-details">{{ 'tab.details'|trans|desc('Details') }}</a></li>
            <li class="ez-tabs-label"><a href="#ez-tab-versions">{{ 'tab.versions'|trans|desc('Versions') }}</a></li>
            <li class="ez-tabs-label"><a href="#ez-tab-locations">{{ 'tab.locations'|trans|desc('Locations') }}</a></li>
            <li class="ez-tabs-label"><a href="#ez-tab-relations">{{ 'tab.related.content'|trans|desc('Related content') }}</a></li>
            <li class="ez-tabs-label"><a href="#ez-tab-urls">{{ 'tab.related.urls'|trans|desc('URLs') }}</a></li>
            <li class="ez-tabs-label"><a href="#ez-tab-translations">{{ 'tab.translations'|trans|desc('Translations') }}</a></li>
        </ul>

        <div class="ez-tabs-panels">
            <div class="ez-tabs-panel is-tab-selected" id="ez-tab-view">
                {% for field in content.fieldsByLanguage(language|default(null)) %}
                <div class="ez-content-field">
                    <p class="ez-content-field-name">{{ ez_field_name(content, field.fieldDefIdentifier) }}</p>
                    <div class="ez-content-field-value">
                        {% if ez_is_field_empty(content, field.fieldDefIdentifier) %}
                            <em>{{"fieldview.field.empty"|trans({}, "fieldview")|desc('This field is empty')}}</em>
                        {% else %}
                            {{ ez_render_field(content, field.fieldDefIdentifier) }}
                        {% endif %}
                    </div>
                </div>
                {% endfor %}
            </div>
            <div class="ez-tabs-panel" id="ez-tab-details">
                {{ render(controller('ez_content:viewAction', {'contentId': contentId, 'locationId': locationId, 'viewType': 'details_tab'})) }}
            </div>
            <div class="ez-tabs-panel" id="ez-tab-versions">
                {{ render(controller('ez_content:viewAction', {'contentId': contentId, 'locationId': locationId, 'viewType': 'versions_tab'})) }}
            </div>
            <div class="ez-tabs-panel" id="ez-tab-locations">
                {{ render(controller('ez_content:viewAction', {'contentId': contentId, 'locationId': locationId, 'viewType': 'locations_tab'})) }}
            </div>
            <div class="ez-tabs-panel" id="ez-tab-relations">
                <p>Relation and reverse relation list should be generated here</p>
            </div>
            <div class="ez-tabs-panel" id="ez-tab-urls">
                {{ render(controller('ez_content:viewAction', {'contentId': contentId, 'locationId': locationId, 'viewType': 'urls_tab'})) }}
            </div>
            <div class="ez-tabs-panel" id="ez-tab-translations">
                {{ render(controller('ez_content:viewAction', {'contentId': contentId, 'locationId': locationId, 'viewType': 'translations_tab'})) }}
            </div>
        </div>
        {% endblock contentview_details %}

        {% block subitems %}
        <ez-subitem parent-location-id="{{ location.id }}">
            Loading subitems...
        </ez-subitem>
        {% endblock %}
    </section>
    <ez-toolbar class="ez-action-bar" visible>
        {% block content_action_toolbar %}
        {% endblock %}
    </ez-toolbar>
    {% endblock %}
    </section>
</ez-server-side-content>
